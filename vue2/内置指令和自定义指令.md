# ğŸ“š ç›®å½•

1. [vueå†…ç½®æŒ‡ä»¤](#1-vueå†…ç½®æŒ‡ä»¤)
    1. [v-text](#1-1-v-text)
    2. [v-html](#1-2-v-html)
    3. [v-pre](#1-3-v-pre)
    4. [v-cloak](#1-4-v-cloak)
    5. [v-once](#1-5-v-once)
    6. [v-for](#1-6-v-for)
    7. [v-if å’Œ v-else å’Œ v-if-else](#1-7-v-ifå’Œv-elseå’Œv-if-else)
    8. [v-show](#1-8-v-show)
    9. [v-model](#1-9-v-model)
        1. [è¡¨å•ä¸Šä½¿ç”¨v-model](#1-9-1-è¡¨å•ä¸Šä½¿ç”¨v-model)
        2. [ç»„ä»¶ä¸Šä½¿ç”¨v-model](#1-9-2-ç»„ä»¶ä¸Šä½¿ç”¨v-model)
        3. [ä½¿ç”¨.syncä¿®é¥°ç¬¦å®ç°v-modelç­‰æ•ˆ](#1-9-3-ä½¿ç”¨syncä¿®é¥°ç¬¦å®ç°v-modelç­‰æ•ˆ)
    10. [v-bind](#1-10-v-bind)
    11. [v-on](#1-11-v-on)
    12. [v-slot](#1-12-v-slot)
        1. [åŒ¿åæ’æ§½](#1-12-1-åŒ¿åæ’æ§½)
        2. [å…·åæ’æ§½](#1-12-2-å…·åæ’æ§½)
        3. [ä½œç”¨åŸŸæ’æ§½](#1-12-3-ä½œç”¨åŸŸæ’æ§½)
2. [è‡ªå®šä¹‰æŒ‡ä»¤](#2-è‡ªå®šä¹‰æŒ‡ä»¤)
    1. [å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤](#2-1-å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤)
    2. [å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤](#2-2-å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤)
    3. [åŠ¨æ€å‚æ•°å’Œç®€å†™](#2-3-åŠ¨æ€å‚æ•°å’Œç®€å†™)
---

> Vue.jsæŒ‡ä»¤ (Directives) æ˜¯å¸¦æœ‰ `v-` å‰ç¼€çš„ç‰¹æ®Šç‰¹æ€§ã€‚æŒ‡ä»¤ç‰¹æ€§çš„å€¼é¢„æœŸæ˜¯å•ä¸ª JavaScript è¡¨è¾¾å¼ (v-for æ˜¯ä¾‹å¤–æƒ…å†µ)ã€‚æˆ‘ä»¬å¯ä»¥å°†æŒ‡ä»¤çœ‹ä½œç‰¹æ®Šçš„HTMLç‰¹æ€§ï¼Œä½œç”¨æ˜¯ï¼šå½“è¡¨è¾¾å¼çš„å€¼æ”¹å˜æ—¶ï¼Œå°†å…¶äº§ç”Ÿçš„è¿å¸¦å½±å“ï¼Œå“åº”å¼åœ°ä½œç”¨äºç»‘å®šçš„DOMã€‚

# 1. vueå†…ç½®æŒ‡ä»¤

å†…ç½®æŒ‡ä»¤æŒ‡çš„å°±æ˜¯Vue.jsè‡ªå¸¦çš„æŒ‡ä»¤ï¼Œå¼€ç®±å³ç”¨ï¼Œä¸€å…±æœ‰14ä¸ªï¼š

- å†…å®¹æ¸²æŸ“æŒ‡ä»¤
  - v-text
  - v-html
  - v-pre
  - v-cloak
  - v-once
- æ¡ä»¶æ¸²æŸ“æŒ‡ä»¤
  - v-for
  - v-if
  - v-else
  - v-else-if
  - v-show
- å±æ€§ç»‘å®šæŒ‡ä»¤
  - v-model
  - v-bind
  - v-on
- æ’æ§½æŒ‡ä»¤
  - v-slot

## 1-1. v-text

è¯¥æŒ‡ä»¤çš„ä½œç”¨æ˜¯æ›´æ–°DOMå…ƒç´ çš„æ–‡æœ¬å†…å®¹ï¼Œä½¿ç”¨ç‡å¾ˆä½ï¼Œä¸€èˆ¬éƒ½æ˜¯ç”¨åŒèŠ±æ‹¬å·æ¥ä»£æ›¿äº†ï¼Œå¯ä»¥å¿½ç•¥

**è¯­æ³•å¦‚ä¸‹ï¼š**

```javascript
<template>
  <div>
    <span v-text="msg"></span>
  </div>
</template>

<script>
export default {
  name: "home",
  data() {
    return {
      msg: 'æˆ‘æ˜¯ä¸€ä¸ªæ–‡æœ¬ä¿¡æ¯'
    }
  }
}
</script>
```

## 1-2. v-html

è¯¥æŒ‡ä»¤çš„ä½œç”¨æ˜¯æ›´æ–°DOMå…ƒç´ çš„`innerHTML`ï¼Œå†…å®¹æŒ‰æ™®é€šHTMLæ’å…¥ï¼Œç”¨å¤„æŒºå¤šçš„ï¼Œæ¯”å¦‚æ¸²æŸ“å­—ç¬¦ä¸²htmlï¼ŒåŠ¨æ€æ’å…¥å…ƒç´ ç­‰ã€‚ï¼ˆæ»¥ç”¨å¯èƒ½ä¼šå¼•èµ·XSSæ”»å‡»ï¼Œæ¯”å¦‚ç”¨æˆ·æäº¤`"<a href="https://æœ‰å®³ç½‘ç«™">xxx</a>"`ï¼Œä¼šè¢«æ¸²æŸ“æˆhtmlæ ‡ç­¾ï¼‰

**è¯­æ³•å¦‚ä¸‹ï¼š**

```javascript
<template>
  <div>
    <div v-html="span"></div>
  </div>
</template>

<script>
export default {
  name: "home",
  data() {
    return {
      span: '<div><span>æˆ‘æ˜¯span</span></div>'
    }
  }
}
</script>
```

## 1-3. v-pre

è¯¥æŒ‡ä»¤ä¸éœ€è¦è¡¨è¾¾å¼ï¼Œä½œç”¨æ˜¯è·³è¿‡ç»‘å®šäº†è¿™ä¸ªæŒ‡ä»¤çš„å…ƒç´ å’Œå®ƒçš„å­å…ƒç´ çš„ç¼–è¯‘è¿‡ç¨‹ã€‚è·³è¿‡å¤§é‡æ²¡æœ‰æŒ‡ä»¤çš„èŠ‚ç‚¹ä¼šåŠ å¿«ç¼–è¯‘ï¼Œä½†æ˜¯ç»‘å®šäº†åï¼Œä¼šç›´æ¥æ˜¾ç¤ºåŒèŠ±æ‹¬å·`{{ xxx }}`ï¼ŒæŒ‰éœ€ä½¿ç”¨ã€‚

## 1-4. v-cloak

è¯¥æŒ‡ä»¤ä¸éœ€è¦è¡¨è¾¾å¼ã€‚è¿™ä¸ªæŒ‡ä»¤ä¼šä¿æŒåœ¨domå…ƒç´ ä¸Šï¼Œç›´åˆ°å…¶å…³è”çš„å®ä¾‹ç»“æŸç¼–è¯‘æ‰å¤±æ•ˆã€‚ä½œç”¨æ˜¯é…åˆcssé€‰æ‹©å™¨`[v-cloak]`ï¼Œæ¥å®ç°éšè—æœªç¼–è¯‘å®Œæˆçš„å…ƒç´ ï¼Œç›´åˆ°å®ä¾‹å‡†å¤‡å®Œæ¯•ã€‚

**è¯­æ³•å¦‚ä¸‹ï¼š**

```javascript
<template>
  <div>
    <p v-cloak>{{ text }}</p>
  </div>
</template>

<script>
export default {
  name: "home",
  data() {
    return {
      text: 'è¿™æ˜¯ä¸€æ®µtextæ–‡æœ¬'
    }
  }
}
</script>

<style scoped>
[v-cloak] {
  display: none;
}
</style>
```

## 1-5. v-once

è¯¥æŒ‡ä»¤ä¸éœ€è¦è¡¨è¾¾å¼ï¼Œä½œç”¨æ˜¯åªæ¸²æŸ“å…ƒç´ å’Œç»„ä»¶ä¸€æ¬¡ã€‚éšåçš„é‡æ–°æ¸²æŸ“ï¼Œå…ƒç´ /ç»„ä»¶åŠå…¶æ‰€æœ‰çš„å­èŠ‚ç‚¹å°†è¢«è§†ä¸ºé™æ€å†…å®¹å¹¶è·³è¿‡ã€‚è¿™å¯ä»¥ç”¨äºä¼˜åŒ–æ›´æ–°æ€§èƒ½ã€‚

**ä¾‹å­å¦‚ä¸‹ï¼š**

```javascript
<template>
  <div class="app">
    <h1 v-once>{{ time }}</h1>
  </div>
</template>

<script>
export default {
  name: 'home',
  data(){
    return {
      time: new Date().getTime()
    }
  },
  mounted() {
    setInterval(() => {
      this.time = new Date().getTime()
    }, 1000)
  }
}
</script>
```

å› ä¸ºh1æ ‡ç­¾å¸¦ä¸Šäº†`v-once`æŒ‡ä»¤ï¼Œæ‰€ä»¥åªæ¸²æŸ“äº†ä¸€æ¬¡ï¼Œåç»­è®¡æ—¶å™¨ä¸åœä¿®æ”¹å€¼ï¼Œä¹Ÿä¸ä¼šå†æ¸²æŸ“ï¼Œæ˜¾ç¤ºçš„æ—¶é—´æˆ³ä¹Ÿå°±å§‹ç»ˆåœåœ¨ç¬¬ä¸€æ¬¡ã€‚

## 1-6. v-for

åŸºäºæºæ•°æ®ï¼Œå¤šæ¬¡æ¸²æŸ“å…ƒç´ æˆ–æ¨¡æ¿å—ã€‚æ•°æ®æºå¯ä»¥æ˜¯`string`ã€`array`ã€`object`ã€`number`ã€`Iterable(æœ‰è¿­ä»£æ¥å£çš„å€¼)`ã€‚ä¸€èˆ¬`v-for`ä¼šæ­é…å†…ç½®å±æ€§`key`ä½¿ç”¨ï¼Œé¿å…æ¸²æŸ“å‡ºç°é—®é¢˜ã€‚è¿™ä¹Ÿæ˜¯ä¸€ä¸ªç»å…¸é¢è¯•é¢˜ï¼Œå…·ä½“åŸå› å¯ä»¥çœ‹ï¼š[Vue2.0 v-for ä¸­ :key åˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿ](https://www.zhihu.com/question/61064119)ï¼Œ[Vueä¸­v-foræ—¶ä¸ºä»€ä¹ˆè¦ç»‘å®škeyï¼Ÿ](https://juejin.cn/post/6997792097084375054)

> æ³¨æ„ï¼šåœ¨vue2ä¸­ï¼Œå¦‚æœåœ¨templateä¸Šä½¿ç”¨v-forï¼Œä¸”ç»‘å®šäº†keyï¼Œå¯èƒ½ä¼šæŠ¥é”™ï¼šâ€œ<template v-for>' cannot be keyed. Place the key on real elements insteadâ€ã€‚æ­¤æ—¶ï¼Œå¯ä»¥æŠŠkeyç§»åˆ°çœŸå®èŠ‚ç‚¹ä¸Šï¼Œå¹¶ä¸”ä¿®æ”¹.eslintrc.jsçš„é…ç½®ï¼Œåœ¨rulesçš„è§„åˆ™ä¸Šæ·»åŠ ï¼š'vue/no-v-for-template-key': 'off'

**ä¾‹å­å¦‚ä¸‹ï¼š**

```javascript
<template>
  <div class="app">
    <!-- ä¾‹1 -->
    <h1 v-for="(item, index) in obj" :key="index">{{item}}</h1>
    <!-- ä¾‹2 -->
    <h1 v-for="item in 10" :key="item">{{item}}</h1>
    <!-- ä¾‹3 -->
    <div v-for="item in arr" :key="item">
      <span>å§“åï¼š{{item.name}}</span>
      <span>å¹´é¾„ï¼š{{item.age}}</span>
    </div>
  </div>
</template>

<script>
export default {
  name: 'home',
  data(){
    return {
      obj: {
        a: 100,
        b: 200,
        c: 300
      },
      arr: [
        { name: 'x', age: 10 },
        { name: 'xx', age: 11 },
        { name: 'xxx', age: 12 }
      ]
    }
  }
}
</script>
```

## 1-7. v-ifå’Œv-elseå’Œv-if-else

æ ¹æ®è¡¨è¾¾å¼ä¹‹çœŸå‡å€¼æ¥æ¸²æŸ“å…ƒç´ ã€‚åœ¨åˆ‡æ¢æ—¶ç»‘å®šè¯¥æŒ‡ä»¤çš„å…ƒç´ /ç»„ä»¶ä¼šè¢«é”€æ¯å¹¶é‡å»ºã€‚å¦‚æœæ˜¯ç»‘å®šåœ¨templateæ ‡ç­¾ä¸Šï¼Œå°†æå‡ºtemplateçš„å†…å®¹ä½œä¸ºæ¡ä»¶å—ã€‚

> æ³¨ï¼šåœ¨vue2ä¸­ã€‚å½“ v-if å’Œ v-for ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œv-for çš„ä¼˜å…ˆçº§æ¯” v-if é«˜ï¼Œè€Œåœ¨vue3ä¸­åˆ™ç›¸åã€‚

> æ³¨ï¼šè¯¥æŒ‡ä»¤å¯è§¦å‘<transition>ç»„ä»¶è¿‡æ¸¡æ•ˆæœ

**ä¾‹å­å¦‚ä¸‹ï¼š**

```javascript
<template>
  <div class="app">
    <h1 v-if="num < 2">numå°äº2</h1>
    <h2 v-else-if="num <= 5">numå°äºç­‰äº5</h2>
    <h3 v-else>numå¤§äº5</h3>
  </div>
</template>

<script>
export default {
  name: 'home',
  data(){
    return {
      num: Math.round(Math.random() * 10)
    }
  }
}
</script>
```

## 1-8. v-show

æ ¹æ®è¡¨è¾¾å¼ä¹‹çœŸå‡å€¼ï¼Œåˆ‡æ¢å…ƒç´ çš„`CSS display`å±æ€§ï¼Œå½“å€¼ä¸ºfalseæ—¶ï¼Œdisplayä¸º`none`ã€‚

> è¯¥æŒ‡ä»¤å¯è§¦å‘<transition>ç»„ä»¶è¿‡æ¸¡æ•ˆæœ

**ä¾‹å­å¦‚ä¸‹ï¼š**

```javascript
<template>
  <div class="app">
    <h1 v-show="num < 5">æˆ‘æ˜¯H1</h1>
  </div>
</template>

<script>
export default {
  name: 'home',
  data(){
    return {
      num: 0
    }
  },
  mounted() {
    setInterval(() => {
      this.num = Math.round(Math.random() * 10)
    }, 1000)
  }
}
</script>
```

## 1-9. v-model

åœ¨è¡¨å•æ§ä»¶æˆ–è€…ç»„ä»¶ä¸Šåˆ›å»ºåŒå‘ç»‘å®šçš„å€¼ï¼Œæœ¬è´¨ä¸Šæ¥è¯´ï¼Œå®ƒæ˜¯ä¸€ä¸ªè¯­æ³•ç³–ï¼Œå®ƒè´Ÿè´£ç›‘å¬ç”¨æˆ·çš„è¾“å…¥äº‹ä»¶ä»¥æ›´æ–°æ•°æ®ï¼Œå¹¶å¯¹ä¸€äº›æç«¯åœºæ™¯è¿›è¡Œä¸€äº›ç‰¹æ®Šå¤„ç†ã€‚æ¯”å¦‚ï¼š`v-model="foo"`ï¼Œç­‰ä»·äº `:value="foo"`åŠ ä¸Š`@input="foo = $event"`çš„ä¾¿æ·å†™æ³•ã€‚

**åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹ï¼Œä»¥ä¸‹ä¸¤ç§å†™æ³•æ˜¯ç­‰ä»·çš„ï¼š**

```javascript
<input v-model="name" />

<input :value="name" @input="name = $event" />
```

æ‹¥æœ‰ä»¥ä¸‹ä¿®é¥°ç¬¦ï¼š

- .lazyï¼šå–ä»£ input ç›‘å¬ change äº‹ä»¶
- .numberï¼šè¾“å…¥å­—ç¬¦ä¸²è½¬ä¸ºæœ‰æ•ˆçš„æ•°å­—
- .trimï¼šè¿‡æ»¤é¦–å°¾ç©ºæ ¼

### 1-9-1. è¡¨å•ä¸Šä½¿ç”¨v-model

```javascript
<template>
  <div class="app">
    <input type="text" v-model="text">
  </div>
</template>

<script>
export default {
  name: 'home',
  data(){
    return {
      text: ''
    }
  }
}
</script>
```

### 1-9-2. ç»„ä»¶ä¸Šä½¿ç”¨v-model

- çˆ¶ç»„ä»¶

```javascript
<template>
  <div>
    <h1>{{ total }}</h1>
    <hello-world v-model="total" @input="handleInput" />
  </div>
</template>

<script>
import helloWorld from '@/components/HelloWorld'

export default {
  name:'home',
  components:{
    helloWorld
  },
  data(){return {
    total: 0
  }},
  methods: {
    handleInput(v) {
      this.total = v
    }
  }
}
</script>
```

- å­ç»„ä»¶ï¼ˆå­ç»„ä»¶æ¥æ”¶çš„propså€¼å­—æ®µå¿…é¡»æ˜¯`value`ï¼‰

```javascript
<template>
  <div class="app">
    <button @click="handleChange">å¢åŠ </button>
  </div>
</template>

<script>
export default {
  name: 'holle',
  props: ['value'],
  methods: {
    handleChange() {
      this.$emit('input', this.value + 1)
    }
  }
}
</script>
```

### 1-9-3. ä½¿ç”¨.syncä¿®é¥°ç¬¦å®ç°v-modelç­‰æ•ˆ

- çˆ¶ç»„ä»¶

```javascript
<template>
  <div>
    <h1>{{ total }}, {{ age }}</h1>
    <hello-world :a.sync="total" :b.sync="age" @input="handleInput" />
  </div>
</template>

<script>
import helloWorld from '@/components/HelloWorld'

export default {
  name:'home',
  components:{
    helloWorld
  },
  data(){return {
    total: 0,
    age: 0
  }},
  methods: {
    handleInput(v1, v2) {
      this.total = v1
      this.age = v2
    }
  }
}
</script>
```

- å­ç»„ä»¶

```javascript
<template>
  <div class="app">
    <button @click="handleChange">å¢åŠ </button>
  </div>
</template>

<script>
export default {
  name: 'holle',
  props: ['a', 'b'],
  methods: {
    handleChange() {
      this.$emit('input', this.a + 1, this.b + 2)
    }
  }
}
</script>
```

## 1-10. v-bind

åŠ¨æ€çš„ç»‘å®šä¸€ä¸ªæˆ–å¤šä¸ªå±æ€§åˆ°ç»„ä»¶ä¸Šï¼Œå¯ä»¥ç»‘å®šclassã€styleç­‰ä»»æ„å€¼ã€‚å¯ä»¥ç®€å†™ä¸º`:`ã€‚æ‹¥æœ‰ä»¥ä¸‹ä¿®é¥°ç¬¦ï¼š

- .syncï¼šè¯­æ³•ç³–ï¼Œæ‰©å±•æˆä¸€ä¸ªæ›´æ–°çˆ¶ç»„ä»¶ç»‘å®šå€¼çš„ v-on ä¾¦å¬å™¨
- .camelï¼škebab-caseè½¬camelCase
- .propï¼šä½œä¸ºä¸€ä¸ªDOM propertyç»‘å®šè€Œä¸æ˜¯ä½œä¸ºattributeç»‘å®šï¼Œé€šè¿‡è‡ªå®šä¹‰å±æ€§å­˜å‚¨å˜é‡ï¼Œé¿å…æš´éœ²æ•°æ®ã€‚é˜²æ­¢æ±¡æŸ“HTMLç»“æ„

**ä¾‹å­ï¼š**

```javascript
<template>
  <div>
    <h1 :class="['aaa','bbb', num < 100 ? 'ccc':'ddd']"></h1>
    <h2 :style="mode"></h2>
    <input type="text" :value="msg">
    <img v-bind:src="imageSrc" />
  </div>
</template>

<script>
export default {
  name:'aaa',
  data(){
    return {
      num: 200,
      mode: {
        color: 'red',
        fontSize: '20px'
      },
      msg: '',
      imageSrc: 'https://www.baidu.com/xxx.png'
    }
  }
}
</script>
```

## 1-11. v-on

ç»‘å®šäº‹ä»¶ç›‘å¬å™¨ã€‚äº‹ä»¶ç±»å‹ç”±å‚æ•°æŒ‡å®šã€‚å¯ä»¥ç®€å†™ä¸º`@`ã€‚æ‹¥æœ‰ä»¥ä¸‹ä¿®é¥°ç¬¦ï¼š

- .stopï¼šè°ƒç”¨ event.stopPropagation()ï¼Œé˜»æ­¢å†’æ³¡
- .preventï¼šè°ƒç”¨ event.preventDefault()ï¼Œé˜»æ­¢å…ƒç´ å‘ç”Ÿé»˜è®¤çš„è¡Œä¸º
- .captureï¼šæ·»åŠ äº‹ä»¶ä¾¦å¬å™¨æ—¶ä½¿ç”¨ capture æ•è·æ¨¡å¼
- .selfï¼šäº‹ä»¶ä»ä¾¦å¬å™¨ç»‘å®šçš„å…ƒç´ æœ¬èº«è§¦å‘æ—¶æ‰è§¦å‘å›è°ƒ
- .keyCodeï¼šå½“äº‹ä»¶æ˜¯ä»ç‰¹å®šæŒ‰é”®è§¦å‘æ—¶ï¼Œæ‰è§¦å‘å›è°ƒï¼ˆæ³¨ï¼š[keyCodeçš„äº‹ä»¶ç”¨æ³•å·²ç»è¢«åºŸå¼ƒäº†å¹¶å¯èƒ½ä¸ä¼šè¢«æœ€æ–°çš„æµè§ˆå™¨æ”¯æŒ](https://v2.cn.vuejs.org/v2/guide/events.html#%E6%8C%89%E9%94%AE%E7%A0%81)ï¼‰
- .nativeï¼šç›‘å¬ç»„ä»¶æ ¹å…ƒç´ çš„åŸç”Ÿäº‹ä»¶
- .onceï¼šåªè§¦å‘ä¸€æ¬¡å›è°ƒ
- .passiveï¼š æ»šåŠ¨äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºå°†ä¼šç«‹å³è§¦å‘ï¼Œè€Œä¸æ˜¯ç­‰åˆ°äº‹ä»¶è§¦å‘å®Œå†è§¦å‘ï¼Œæå‡ç§»åŠ¨ç«¯çš„æ€§èƒ½

```javascript
<button v-on:click="add"></button>
// åŠ¨æ€äº‹ä»¶
<button @[event]="change"></button>
// äº‹ä»¶å¯¹è±¡
<button @click="add('hello', $event)"></button>
// æŒ‰é”®äº‹ä»¶
<input @keyup.enter="onEnter" />
// æŒ‰é”®ä»£ç 
<input @keyup.13="onEnter" />
```

## 1-12. v-slot

slotï¼Œä¹Ÿç§°æ’æ§½ï¼Œæ˜¯ç»„ä»¶çš„ä¸€å—HTMLæ¨¡ç‰ˆï¼Œè¿™å—æ¨¡ç‰ˆç”±çˆ¶ç»„ä»¶æä¾›ã€‚å¯ä»¥è¯´æ˜¯å­ç»„ä»¶æš´éœ²çš„ä¸€ä¸ªè®©çˆ¶ç»„ä»¶ä¼ å…¥è‡ªå®šä¹‰å†…å®¹çš„æ¥å£ï¼Œæ¥å®ç°å†…å®¹åˆ†å‘ã€‚ä¸€èˆ¬éƒ½å†™åœ¨`template`æ ‡ç­¾ä¸Šï¼Œå¯ä»¥ç®€å†™ä¸º`#`ã€‚

### 1-12-1. åŒ¿åæ’æ§½

åŒ¿åæ’æ§½ç”¨`slot`æ ‡ç­¾æ¥ç¡®å®šæ¸²æŸ“çš„ä½ç½®ï¼Œé‡Œé¢å¯ä»¥æ”¾ç½®çˆ¶ç»„ä»¶æ²¡ä¼ å†…å®¹æ—¶çš„é»˜è®¤å†…å®¹ï¼Œä¸€ä¸ªç»„ä»¶é‡Œï¼ŒåŒ¿åæ’æ§½åªèƒ½æœ‰ä¸€ä¸ªã€‚`slot="default"`å¯ä»¥å¿½ç•¥ä¸å†™ã€‚

- çˆ¶ç»„ä»¶

```javascript
<template>
  <div>
    <aaaChildren></aaaChildren>

    <aaaChildren>
      <h1>æˆ‘æ˜¯çˆ¶ç»„ä»¶çš„å†…å®¹</h1>
    </aaaChildren>
  </div>
</template>

<script>
import aaaChildren from './children/index.vue'

export default {
  name:'aaa',
  components:{
    aaaChildren
  }
}
</script>
```

- å­ç»„ä»¶

```javascript
<template>
  <div class="aaa_children">
    <slot>
      <h1>æˆ‘æ˜¯é»˜è®¤å†…å®¹</h1>
    </slot>
  </div>
</template>

<script>
  export default {
    name:'aaaChildren'
  }
</script>
```

### 1-12-2. å…·åæ’æ§½

åœ¨`slot`æ ‡ç­¾ä¸ŠåŠ å…¥`name`å±æ€§ï¼Œä½¿å¾—çˆ¶çº§å¯ä»¥å°†å†…å®¹æ’å…¥å¯¹åº”çš„ä½ç½®ä¸­ã€‚å…·åæ’æ§½å¯ä»¥æœ‰å¾ˆå¤šä¸ªï¼Œä½¿ç”¨çš„æ—¶å€™éœ€è¦å¸¦ä¸Šåå­—åšåŒºåˆ†ã€‚

- çˆ¶ç»„ä»¶

```javascript
<template>
  <div>
    <aaaChildren>
      <template #text>111</template>
      <template #footer>222</template>
    </aaaChildren>
  </div>
</template>

<script>
import aaaChildren from './children/index.vue'

export default {
  name:'aaa',
  components:{
    aaaChildren
  }
}
</script>
```

- å­ç»„ä»¶

```javascript
<template>
	<div class="aaa_children">
		<slot name="text">
			<h1>æˆ‘æ˜¯textæ’æ§½</h1>
		</slot>
		<div>
			<slot name="footer">
				<h2>æˆ‘æ˜¯footeræ’æ§½</h2>
			</slot>
		</div>
	</div>
</template>

<script>
export default {
	name: 'aaaChildren'
}
</script>
```

### 1-12-3. ä½œç”¨åŸŸæ’æ§½

ä½œç”¨åŸŸæ’æ§½ï¼Œæ˜¯åœ¨å­ç»„ä»¶çš„`slot`ä¸Šç»‘å®šå±æ€§æ¥å°†å­ç»„ä»¶çš„ä¿¡æ¯ä¼ ç»™çˆ¶ç»„ä»¶ä½¿ç”¨ï¼Œè¿™äº›å±æ€§ä¼šè¢«æŒ‚åœ¨çˆ¶ç»„ä»¶çš„slot-scopeå¯¹è±¡ä¸Šã€‚ç»‘å®šæ’æ§½æ—¶ç”¨çš„keyï¼Œå°±æ˜¯çˆ¶ç»„ä»¶è·å–æ•°æ®çš„å¯¹è±¡åã€‚å¦‚ä¸‹ä¾‹å­ï¼Œå­ç»„ä»¶å®šä¹‰äº†ä¸€ä¸ªslotï¼Œåå­—ä¸ºtextï¼Œå¹¶ä¸”åœ¨slotä¸Šç»‘å®šäº†ä¸€ä¸ªdataå±æ€§ï¼Œå±æ€§çš„å€¼ï¼Œå°±æ˜¯å­ç»„ä»¶éœ€è¦ä¼ é€’è¿‡å»çš„å€¼ã€‚å½“çˆ¶ç»„ä»¶ä½¿ç”¨å­ç»„ä»¶çš„textæ’æ§½æ—¶ï¼Œé€šè¿‡textæ’æ§½è·å–åˆ°scopeå¯¹è±¡ï¼Œscopeå¯¹è±¡ä¸Šï¼Œå°±å¯ä»¥è·å–åˆ°å­ç»„ä»¶ä¼ é€’çš„å€¼ã€‚

- çˆ¶ç»„ä»¶

```javascript
<template>
  <div>
    <aaaChildren>
      <template #default="scope">
        <h1>{{ scope.info.age }}</h1>
      </template>
      <template #text="scope">
        <h2>{{ scope.data }}</h2>
      </template>
    </aaaChildren>
  </div>
</template>

<script>
import aaaChildren from './children/index.vue'

export default {
  name:'aaa',
  components:{
    aaaChildren
  }
}
</script>
```

- å­ç»„ä»¶

```javascript
<template>
  <div class="aaa_children">
    <slot :info="user"></slot>
    <slot name="text" :data="name"></slot>
  </div>
</template>

<script>
  export default {
    name:'aaaChildren',
    props:[],
    components:{},
    data(){
      return {
        user: {
          age: 18,
          name: 'å°æ˜'
        },
        name: 'å¡å¡ç½—ç‰¹'
      }
    }
  }
</script>
```

# 2. è‡ªå®šä¹‰æŒ‡ä»¤

è‡ªå®šä¹‰æŒ‡ä»¤ã€‚æ˜¯Vueæš´éœ²äº†è‡ªå®šä¹‰æŒ‡ä»¤çš„APIç»™æˆ‘ä»¬ï¼Œè®©æˆ‘ä»¬é™¤äº†ä½¿ç”¨å†…ç½®æŒ‡ä»¤å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå·±å®šä¹‰æŒ‡ä»¤ï¼ˆæ¯”å¦‚ï¼šå¤åˆ¶ç²˜è´´æŒ‡ä»¤ï¼Œå›¾ç‰‡æ‡’åŠ è½½æŒ‡ä»¤ï¼Œé˜²æŠ–æŒ‡ä»¤ç­‰ç­‰ï¼‰ï¼Œå®šä¹‰å¥½åå’Œå†…ç½®æŒ‡ä»¤çš„æ–¹å¼éå¸¸ç±»ä¼¼ã€‚å®ƒå¯ä»¥æœ‰å…¨å±€çš„å’Œå±€éƒ¨çš„ä¸¤ç§ã€‚æŒ‡ä»¤ä¹Ÿæœ‰è‡ªå·±çš„é’©å­å‡½æ•°ï¼Œå¦‚ä¸‹ï¼š

- bindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ç¬¬ä¸€æ¬¡ç»‘å®šåˆ°å…ƒç´ æ—¶è°ƒç”¨ã€‚åœ¨è¿™é‡Œå¯ä»¥è¿›è¡Œä¸€æ¬¡æ€§çš„åˆå§‹åŒ–è®¾ç½®
- insertedï¼šè¢«ç»‘å®šå…ƒç´ æ’å…¥çˆ¶èŠ‚ç‚¹æ—¶è°ƒç”¨ (ä»…ä¿è¯çˆ¶èŠ‚ç‚¹å­˜åœ¨ï¼Œä½†ä¸ä¸€å®šå·²è¢«æ’å…¥æ–‡æ¡£ä¸­)
- updateï¼šæ‰€åœ¨ç»„ä»¶çš„VNodeæ›´æ–°æ—¶è°ƒç”¨ï¼Œä½†æ˜¯å¯èƒ½å‘ç”Ÿåœ¨å…¶å­VNodeæ›´æ–°ä¹‹å‰ã€‚æŒ‡ä»¤çš„å€¼å¯èƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¹Ÿå¯èƒ½æ²¡æœ‰ã€‚ä½†æ˜¯ä½ å¯ä»¥é€šè¿‡æ¯”è¾ƒæ›´æ–°å‰åçš„å€¼æ¥å¿½ç•¥ä¸å¿…è¦çš„æ¨¡æ¿æ›´æ–°
- componentUpdatedï¼šæŒ‡ä»¤æ‰€åœ¨ç»„ä»¶çš„ VNode åŠå…¶å­ VNode å…¨éƒ¨æ›´æ–°åè°ƒç”¨
- unbindï¼šåªè°ƒç”¨ä¸€æ¬¡ï¼ŒæŒ‡ä»¤ä¸å…ƒç´ è§£ç»‘æ—¶è°ƒç”¨

ä»¥ä¸Šé’©å­å‡½æ•°éƒ½æœ‰4ä¸ªå‚æ•°ï¼Œå¦‚ä¸‹ï¼š

- elï¼šæŒ‡ä»¤æ‰€ç»‘å®šçš„å…ƒç´ ï¼Œå¯ä»¥ç”¨æ¥ç›´æ¥æ“ä½œ DOM
- bindingï¼šä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«è¿™äº›å±æ€§
  - nameï¼šæŒ‡ä»¤åï¼Œä¸åŒ…æ‹¬ v- å‰ç¼€
  - valueï¼šæŒ‡ä»¤çš„ç»‘å®šå€¼ï¼Œä¾‹å¦‚ï¼šv-bold="1 + 1" ä¸­ï¼Œç»‘å®šå€¼ä¸º 2
  - oldValueï¼šæŒ‡ä»¤ç»‘å®šçš„å‰ä¸€ä¸ªå€¼ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨ã€‚æ— è®ºå€¼æ˜¯å¦æ”¹å˜éƒ½å¯ç”¨
  - expressionï¼šå­—ç¬¦ä¸²å½¢å¼çš„æŒ‡ä»¤è¡¨è¾¾å¼ã€‚ä¾‹å¦‚ v-bold="1 + 1" ä¸­ï¼Œè¡¨è¾¾å¼ä¸º "1 + 1"
  - argï¼šä¼ ç»™æŒ‡ä»¤çš„å‚æ•°ï¼Œå¯é€‰ã€‚ä¾‹å¦‚ v-bold:foo ä¸­ï¼Œå‚æ•°ä¸º "foo"
  - modifiersï¼šä¸€ä¸ªåŒ…å«ä¿®é¥°ç¬¦çš„å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šv-bold.foo.bar ä¸­ï¼Œä¿®é¥°ç¬¦å¯¹è±¡ä¸º { foo: true, bar: true }
- vnodeï¼šVue ç¼–è¯‘ç”Ÿæˆçš„è™šæ‹ŸèŠ‚ç‚¹
- oldVnodeï¼šä¸Šä¸€ä¸ªè™šæ‹ŸèŠ‚ç‚¹ï¼Œä»…åœ¨ update å’Œ componentUpdated é’©å­ä¸­å¯ç”¨

## 2-1. å…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤

é€šè¿‡`Vue`å®ä¾‹èº«ä¸Šçš„`directive() API`æ³¨å†Œä¸€ä¸ªå…¨å±€è‡ªå®šä¹‰æŒ‡ä»¤ã€‚ä¾‹å­å¦‚ä¸‹ï¼š

- é¦–å…ˆåœ¨srcæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªdirectiveæ–‡ä»¶å¤¹ï¼Œé‡Œé¢åˆ›å»ºä¸€ä¸ªindex.jsæ–‡ä»¶ï¼Œå†™å…¥ä»¥ä¸‹ä»£ç 

```javascript
/**
 * å®‰è£…æŒ‡ä»¤
 * @param Vue vueå®ä¾‹
 */
export default function installDirective(Vue) {
  // ç²—ä½“æŒ‡ä»¤
	Vue.directive('bold', {
    inserted(el) {
      el.style.fontWeight = 'bold'
    }
  })
}
```

- ç„¶ååœ¨main.jsé‡Œï¼Œå¼•å…¥`directive`ï¼Œç„¶åä½¿ç”¨`Vue.use`å®‰è£…æŒ‡ä»¤

```javascript
import Vue from 'vue'
import App from './App.vue'
import initDirective from '@/directive'

Vue.use(initDirective)

new Vue({
  render: h => h(App),
}).$mount('#app')
```

- ä½¿ç”¨å¦‚ä¸‹ï¼š

```javascript
<template>
  <div v-bold>123</div>
</template>
```

## 2-2. å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤

ç»„ä»¶ä¸­ä¹Ÿæ¥å—ä¸€ä¸ª`directives`çš„é€‰é¡¹ï¼Œåœ¨ç»„ä»¶ä¸­å®šä¹‰çš„è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œå°±æ˜¯å±€éƒ¨è‡ªå®šä¹‰æŒ‡ä»¤ï¼Œå…¶å‚æ•°å’Œå…¨å±€æŒ‡ä»¤ä¸€è‡´ã€‚ä¾‹å­å¦‚ä¸‹ï¼š

```javascript
<template>
	<div v-bold>123</div>
</template>

<script>
export default {
	name: 'aaaChildren',
	directives: {
		bold: {
			inserted: function (el) {
				el.style.fontWeight = 'bold'
			}
		}
	}
}
</script>
```

## 2-3. åŠ¨æ€å‚æ•°å’Œç®€å†™

æŒ‡ä»¤çš„å‚æ•°å¯ä»¥æ˜¯åŠ¨æ€ï¼Œè¿™æ ·å¯ä»¥çµæ´»è¿ç”¨ï¼Œä¾‹å­å¦‚ä¸‹ï¼Œå¯ä»¥åŠ¨æ€ä¿®æ”¹é«˜åº¦çš„æŒ‡ä»¤ï¼š

- æ³¨å†ŒæŒ‡ä»¤ï¼š

```javascript
/**
 * å®‰è£…æŒ‡ä»¤
 * @param Vue vueå®ä¾‹
 */
export default function initDirective(Vue) {
  // ç®€å†™ åœ¨bindå’Œupdateæ—¶è§¦å‘ç›¸åŒè¡Œä¸º
  Vue.directive('height', (el, binding) => {
    el.style.backgroundColor = 'skyblue'
    el.style.height = `${binding.value}px`
  })
}
```

- ä½¿ç”¨æŒ‡ä»¤ï¼š

```javascript
<template>
  <div>
    <button @click="addHeight">ç‚¹å‡»å¢é«˜</button>
    <div v-height="h"></div>
  </div>
</template>

<script>
export default {
  name:'aaa',
  data(){
    return {
      h: 100
    }
  },
  methods: {
    addHeight() {
      this.h += 2
    }
  }
}
</script>
```
